#!/home/s/ops/perl/bin/perl
use strict;
use warnings;

use FindBin qw( $RealBin );

use NS::Util::OptConf;
use NS::Util::Sudo;
use NS::Monitor::Pool;

use Data::Dumper;
NS::Util::Sudo->sudo();

$| ++;
$NS::Util::OptConf::ARGC = 1;
$NS::Util::OptConf::THIS = 'tpool';

=head1 SYNOPSIS

 $0 name
    
=cut

my %o = NS::Util::OptConf->load()->get()->dump();

my $pool = NS::Monitor::Pool->new( 
    name => shift,
    code => $o{code},
    conf =>  "$o{conf}/pool",
);

$pool->run();